<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","version":"8.5.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta name="description" content="Always good to see">
<meta property="og:type" content="website">
<meta property="og:title" content="aplyc1a&#39;s blogs">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="aplyc1a&#39;s blogs">
<meta property="og:description" content="Always good to see">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="aplyc1a">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>aplyc1a's blogs</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">aplyc1a's blogs</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">aplyc1a</p>
  <div class="site-description" itemprop="description">Always good to see</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">25</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



          </div>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/%E7%A4%BE%E5%B7%A5%E5%AD%97%E5%85%B8%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7-RainCode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="aplyc1a">
      <meta itemprop="description" content="Always good to see">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aplyc1a's blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/%E7%A4%BE%E5%B7%A5%E5%AD%97%E5%85%B8%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7-RainCode/" class="post-title-link" itemprop="url">社工字典生成工具RainCode</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-22 15:10:00" itemprop="dateCreated datePublished" datetime="2021-06-22T15:10:00-08:00">2021-06-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-21 23:10:53" itemprop="dateModified" datetime="2021-06-21T23:10:53-08:00">2021-06-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>网上的社工字典生成工具有很多，但不少工具的定制化程度很低，用起来比较难受，最重要的是没有区分目标对象的类型。<br>之前花了一定时间研究了口令编排的习惯模式，发现语言习惯（如：英语语系、汉语语系）、不同身份类型（上班族、学生）、以及帐号的拥有者（如：虚拟用户、测试用户、普通用户）的字典模式是有一定差别的。<br>网上的工具没有很好的考虑这方面问题，要么导致口令没有包含在内，要么导致字典过大。因此，写了一个比较容易上手且能够高度定制化的能够针对不同角色用户来生成字典。同时还集成了一些默认的高频弱口令及字典制作过程中可能用到的小工具脚本。</p>
<h2 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h2><p>通过定制化不同角色的密码模型文件（*.model）及信息元数据文件（config.json）可以极大概率的产生正确的用户密码。</p>
<h3 id="1-生成自然人社工字典"><a href="#1-生成自然人社工字典" class="headerlink" title="1 生成自然人社工字典"></a>1 生成自然人社工字典</h3><p><strong>step1</strong>：收集目标的各类信息，填入<strong>human.json</strong>。</p>
<p><strong>step2</strong>：选择对应的模型文件(<strong>*.model</strong>)。</p>
<p><strong>step3</strong>：执行之。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">python3 raincode.py -j *.json -m *.model [-i dicfilename] [-o [result.txt]]</span><br><span class="line">-j/--json *  : 指定需要加载的目标元数据文件。</span><br><span class="line">-m/--model * : 指定需要加载的目标模型文件。</span><br><span class="line">-o/--output [filename]: 指定输出文件名称。</span><br><span class="line">-i/--import *: 导入外置字典</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">输出到标准屏幕</span></span><br><span class="line">python3 raincode.py -j human.json -m model/chinese-password.model</span><br><span class="line"><span class="meta">#</span><span class="bash">输出密码到文件</span></span><br><span class="line">python3 raincode.py -j human.json -m model/chinese-password.model -o result.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">导入密码</span></span><br><span class="line">python3 raincode.py -j human.json -m model/chinese-password.model -i common/chinese-password.txt</span><br></pre></td></tr></table></figure>



<h3 id="2-后台"><a href="#2-后台" class="headerlink" title="2 后台"></a>2 后台</h3><p><strong>step1</strong>：收集目标的各类信息，填入<strong>backend.json</strong>。</p>
<p><strong>step2</strong>：选择对应的模型文件(<strong>*.model</strong>)。</p>
<p><strong>step3</strong>：执行之。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">python3 raincode.py -j *.json -m *.model [-i dicfilename] [-o [result.txt]]</span><br><span class="line">-j/--json : 指定需要加载的目标元数据文件。</span><br><span class="line">-m/--model: 指定需要加载的目标模型文件。</span><br><span class="line">-o/--output [filename]: 指定输出文件名称。</span><br><span class="line">-i/--import [filename]: 导入外置字典</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">输出到标准屏幕</span></span><br><span class="line">python3 raincode.py -j backend.json -m model/backend.model</span><br><span class="line"><span class="meta">#</span><span class="bash">输出密码到文件</span></span><br><span class="line">python3 raincode.py -j backend.json -m model/backend.model -o result.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">导入密码</span></span><br><span class="line">python3 raincode.py -j backend.json -m model/backend.model -i common/backend-password.txt</span><br></pre></td></tr></table></figure>



<h2 id="附录-目录说明"><a href="#附录-目录说明" class="headerlink" title="附录-目录说明"></a>附录-目录说明</h2><h3 id="model"><a href="#model" class="headerlink" title="model"></a>model</h3><p>存储用于生成字典的核心模型文件。模型描述的是密码的结构。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>chinese-password.model</td>
<td>中文密码模型</td>
</tr>
<tr>
<td>engish-password.model</td>
<td>英语密码模型</td>
</tr>
<tr>
<td>backend-password.model</td>
<td>后台常见密码模型</td>
</tr>
</tbody></table>
<h3 id="db"><a href="#db" class="headerlink" title="db"></a>db</h3><table>
<thead>
<tr>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>%m%d.txt</td>
<td>4位月日-数字字典</td>
</tr>
<tr>
<td>%Y%m%d.txt</td>
<td>6位年月日-数字字典</td>
</tr>
<tr>
<td>chinesename-l3.txt</td>
<td>3位名字-字母字典</td>
</tr>
<tr>
<td>sfz_l4.txt</td>
<td>某证后4位-字母字典</td>
</tr>
<tr>
<td>sfz_l6.txt</td>
<td>某证后6位-字母字典</td>
</tr>
<tr>
<td>百家姓.txt</td>
<td>百家姓频数排序-字符字典</td>
</tr>
</tbody></table>
<p>使用<strong>db2json.py</strong>将txt字典转化为可加入json文件中的材料。</p>
<p>python3 db2json.py -i chinesename-l3.txt -n name &gt; 1.json</p>
<h3 id="common"><a href="#common" class="headerlink" title="common"></a>common</h3><table>
<thead>
<tr>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>chinese-password.txt</td>
<td>国内高频弱口令</td>
</tr>
<tr>
<td>english-password.txt</td>
<td>国外高频弱口令(暂缺)</td>
</tr>
<tr>
<td>linux-account.txt</td>
<td>linux常见用户</td>
</tr>
<tr>
<td>backend-account.txt</td>
<td>后台常见用户</td>
</tr>
<tr>
<td>backend-password.txt</td>
<td>后台常见弱口令</td>
</tr>
<tr>
<td>backend-sqlinject-user.txt</td>
<td>后台常见万能账户</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/GPG%E5%8A%A0%E5%AF%86%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="aplyc1a">
      <meta itemprop="description" content="Always good to see">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aplyc1a's blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/GPG%E5%8A%A0%E5%AF%86%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">GPG加密工具使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-22 11:50:10" itemprop="dateCreated datePublished" datetime="2021-06-22T11:50:10-08:00">2021-06-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-21 23:09:36" itemprop="dateModified" datetime="2021-06-21T23:09:36-08:00">2021-06-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="0x00-GnuPG用法"><a href="#0x00-GnuPG用法" class="headerlink" title="0x00 GnuPG用法"></a>0x00 GnuPG用法</h1><p>GPG是非常强大的一款数据加密及签名工具，GPG全称GnuPG，官方地址<a target="_blank" rel="noopener" href="https://www.gnupg.org/%E3%80%82%E8%BF%99%E4%B8%80%E5%B7%A5%E5%85%B7%E8%83%BD%E5%A4%9F%E5%B8%AE%E5%8A%A9%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E4%B9%8B%E9%97%B4%E8%BF%9B%E8%A1%8C%E9%AB%98%E5%BC%BA%E5%BA%A6%E5%8A%A0%E5%AF%86%E7%9A%84%E4%BA%92%E7%9B%B8%E8%AE%A4%E8%AF%81%E7%9A%84%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E4%B8%8E%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E3%80%82Linux%E4%B8%8B%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E6%BA%90%E5%AE%89%E8%A3%85GnuPG%EF%BC%8Cwindows%E4%B8%8B%E4%B9%9F%E6%9C%89Gpg4win%E3%80%81WinGPG%E7%AD%89%E5%A4%9A%E7%A7%8D%E5%AE%9E%E7%8E%B0%E3%80%82">https://www.gnupg.org/。这一工具能够帮助不同用户之间进行高强度加密的互相认证的数据共享与消息传递。Linux下可以使用源安装GnuPG，windows下也有Gpg4win、WinGPG等多种实现。</a></p>
<p>GPG的常见工作场景包括：</p>
<p>1、数据加密：核心是对称加密数据，公钥加密对称密钥。</p>
<p>2、数据签名：核心是私钥对数据或数据的散列值进行加密获得签名。</p>
<p>3、数据验签：使用公钥对数据或签名文件进行解密，可以实现对来源的认证及完整性校验。</p>
<p>4、安全通信：核心是通信双方均使用对方的公钥对数据进行加密</p>
<p>5、数字信封：通信双方发信时均使用对方证书中的公钥对消息进行加密，发往对方的消息还包含用各自私钥签名后的签名文件。</p>
<p>关于GPG的命令行使用可以参考下面的链接，已经介绍的非常详细了。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://www.ruanyifeng.com/blog/2013/07/gpg.htm</span><br><span class="line">https://www.jianshu.com/p/7f19ceacf57cl</span><br></pre></td></tr></table></figure>

<p>下面是我依据以上两位大佬的教程捋出的速查手册。</p>
<h2 id="1-密钥生命周期管理"><a href="#1-密钥生命周期管理" class="headerlink" title="1 密钥生命周期管理"></a>1 密钥生命周期管理</h2><h3 id="1-1-创建"><a href="#1-1-创建" class="headerlink" title="1.1 创建"></a>1.1 创建</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --full-generate-key</span><br></pre></td></tr></table></figure>

<h3 id="1-2-查看"><a href="#1-2-查看" class="headerlink" title="1.2 查看"></a>1.2 查看</h3><p><strong>查看公钥</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg --list-keys</span><br><span class="line">gpg -k</span><br></pre></td></tr></table></figure>

<p><strong>查看私钥</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg --list-secret-keys</span><br><span class="line">gpg -K</span><br></pre></td></tr></table></figure>



<h3 id="1-3-导入"><a href="#1-3-导入" class="headerlink" title="1.3 导入"></a>1.3 导入</h3><p><strong>导入私钥</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --import private-key.asc</span><br></pre></td></tr></table></figure>

<p><strong>导入公钥</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --import public-key.asc</span><br></pre></td></tr></table></figure>



<h3 id="1-4-导出"><a href="#1-4-导出" class="headerlink" title="1.4 导出"></a>1.4 导出</h3><p><strong>导出私钥</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --armor --output private-key.asc --export-secret-keys aplyc1a@protonmail.com</span><br></pre></td></tr></table></figure>

<p><strong>导出公钥</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --armor --output public-key.asc --<span class="built_in">export</span> aplyc1a@protonmail.com</span><br></pre></td></tr></table></figure>



<h3 id="1-5-删除"><a href="#1-5-删除" class="headerlink" title="1.5 删除"></a>1.5 删除</h3><p><strong>删除私钥</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --delete-secret-key aplyc1a@protonmail.com</span><br></pre></td></tr></table></figure>

<p><strong>删除公钥</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --delete-key aplyc1a@protonmail.com</span><br></pre></td></tr></table></figure>

<h3 id="1-6-吊销"><a href="#1-6-吊销" class="headerlink" title="1.6 吊销"></a>1.6 吊销</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg --gen-revoke aplyc1a@protonmail.com</span><br><span class="line">gpg --send-keys 2DBA87CF</span><br></pre></td></tr></table></figure>

<h3 id="1-7-KeyServer"><a href="#1-7-KeyServer" class="headerlink" title="1.7  KeyServer"></a>1.7  KeyServer</h3><h4 id="1-7-1-上传公钥"><a href="#1-7-1-上传公钥" class="headerlink" title="1.7.1 上传公钥"></a>1.7.1 上传公钥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --send-keys [用户ID] --keyserver hkp://subkeys.pgp.net</span><br></pre></td></tr></table></figure>

<h4 id="1-7-2-下载公钥"><a href="#1-7-2-下载公钥" class="headerlink" title="1.7.2 下载公钥"></a>1.7.2 下载公钥</h4><p>gpg –keyserver ${PGP Key Server} –search-keys ${KeyID}</p>
<h3 id="1-8-指纹"><a href="#1-8-指纹" class="headerlink" title="1.8 指纹"></a>1.8 指纹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --fingerpint 2DBA87CF</span><br></pre></td></tr></table></figure>

<h2 id="2-数据加解密"><a href="#2-数据加解密" class="headerlink" title="2 数据加解密"></a>2 数据加解密</h2><h3 id="2-1-加解密"><a href="#2-1-加解密" class="headerlink" title="2.1 加解密"></a>2.1 加解密</h3><p><strong>加密</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -r参数为接收者公钥</span></span><br><span class="line">gpg --recipient <span class="variable">$&#123;KeyID&#125;</span> --output sercet.txt --encrypt data.txt</span><br><span class="line">gpg -e -r <span class="variable">$&#123;KeyID&#125;</span> data.txt</span><br><span class="line">gpg -r <span class="variable">$&#123;KeyID&#125;</span> -ea data.txt</span><br></pre></td></tr></table></figure>

<p><strong>解密</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --decrypt --output data.txt sercet.txt</span><br></pre></td></tr></table></figure>

<h3 id="2-2-签名"><a href="#2-2-签名" class="headerlink" title="2.2 签名"></a>2.2 签名</h3><p><strong>明文+附加签名</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -a ascii码</span></span><br><span class="line"><span class="comment"># -s/--sign</span></span><br><span class="line">gpg -s data.txt</span><br><span class="line">gpg -sa data.txt</span><br><span class="line"><span class="comment"># 从意思上来看，-sa等价于--clearsign将附加了签名的文件整体ascii化。</span></span><br></pre></td></tr></table></figure>

<p><strong>独立签名</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg --detach-sign data.txt</span><br><span class="line">gpg --detach-sign -a data.txt</span><br></pre></td></tr></table></figure>

<p><strong>加密并签名</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --local-user [发信者ID] --recipient [接收者ID] --armor --sign --encrypt demo.txt</span><br></pre></td></tr></table></figure>

<p><strong>验证签名</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --verify data.gpg.sig data.gpg</span><br></pre></td></tr></table></figure>



<h1 id="0x01-gpg4usb"><a href="#0x01-gpg4usb" class="headerlink" title="0x01 gpg4usb"></a>0x01 gpg4usb</h1><p>同时这里也简单介绍另一款跨平台的gpg工具，<strong>gpg4usb</strong>:</p>
<p>下载：<a target="_blank" rel="noopener" href="https://www.gpg4usb.org/download/gpg4usb-0.3.3-2.zip">https://www.gpg4usb.org/download/gpg4usb-0.3.3-2.zip</a></p>
<p>首次使用需要<strong>创建一个新的密钥对</strong>。</p>
<p><img src="/.com//aplyc1a\articles.MDRes\gpg4usb\2021-06-18_163625.png" alt="2021-06-18_163625"></p>
<p>创建密钥对时要提供名称邮箱地址等信息，这些信息与密钥对绑定起来用于告知此密钥对的创建者身份。</p>
<p>信息输入完毕点确定，稍等片刻提示密钥创建成功。</p>
<p>gpg4usb功能简单，使用容易，基本上可以达到上手就会的效果。功能方面主要有文本处理和文件处理两大块，通过对这些功能的简单组合能构建出意想不到的效果。这个工具非常适合在邮件加密场景中使用。</p>
<p><img src="/.com//.MDRes%5Cgpg4usb%5Cimage-20210618164516471.png" alt="image-20210618164516471"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/%E4%BD%BF%E7%94%A8GPG%E8%BF%9B%E8%A1%8C%E9%82%AE%E4%BB%B6%E5%8A%A0%E5%AF%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="aplyc1a">
      <meta itemprop="description" content="Always good to see">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aplyc1a's blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/%E4%BD%BF%E7%94%A8GPG%E8%BF%9B%E8%A1%8C%E9%82%AE%E4%BB%B6%E5%8A%A0%E5%AF%86/" class="post-title-link" itemprop="url">GPG邮件加密</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-22 11:50:10" itemprop="dateCreated datePublished" datetime="2021-06-22T11:50:10-08:00">2021-06-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-21 23:09:24" itemprop="dateModified" datetime="2021-06-21T23:09:24-08:00">2021-06-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="使用GPG进行邮件加密"><a href="#使用GPG进行邮件加密" class="headerlink" title="使用GPG进行邮件加密"></a>使用GPG进行邮件加密</h1><p><strong>step1</strong>：获得某人对外发布的公钥，导入该公钥到gpg中。在这一过程中要注意发布的公钥的格式。</p>
<p>常见的对外发布的公钥是以文本及文件形式存在的。如果是以可见字符ascii形式（也就是gpg的–armor参数）存在的，则内容形式形如如下所示:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN PGP PUBLIC KEY BLOCK-----</span><br><span class="line">Version: GnuPG </span><br><span class="line">v1mQENBGDMWxgBCACgtdOB293iBw5tS0TgED85oImKq62i6azbkk4p/Ueq0ctXX5Do</span><br><span class="line">................................................................</span><br><span class="line">................................................................</span><br><span class="line">................................................................</span><br><span class="line">................................................................</span><br><span class="line">Cqu8i2ILRvMCMqP0rY/HJdgrwYIRs96zu4xTXgpQWkCoSPAg00bBii/cuBLm7BENdr</span><br><span class="line">9YuBSP1AtFPzvCNvb5asDEcZUa+iRTYNpdLwHJehlbcbIhUHYG9CZyGg==</span><br><span class="line">=z44q</span><br><span class="line">-----END PGP PUBLIC KEY BLOCK-----</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN PGP PUBLIC KEY BLOCK-----</span><br><span class="line">mQINBFS7wI8BEAChYhCa6QqmhpZkM63GN78qq4OI7MYvz+rIVo2At1zBu4TNmHqr</span><br><span class="line">................................................................</span><br><span class="line">................................................................</span><br><span class="line">................................................................</span><br><span class="line">................................................................</span><br><span class="line">mBwe169oZ6C2n3SNQFYE7QgwOlu69JbQZ+KrdFi8oZng/lJBFwcCe3gesly6MPJ1M</span><br><span class="line">3NQDCz+b/8UNQbBWF+okwobdl869P06GZtOgG0eh88=</span><br><span class="line">=s1R6</span><br><span class="line">-----END PGP PUBLIC KEY BLOCK-----</span><br></pre></td></tr></table></figure>

<p>具体导入公钥时，图形化类工具的导入都千篇一律。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_114927.png" alt="2021-06-19_114927"></p>
<p>命令行导入也很简单。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_115246.png" alt="2021-06-19_115246"></p>
<p>step2：准备好以下3部分内容，将他们通过对方的公钥加密后发送给对方。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.自己想要告知对方的内容</span><br><span class="line">2.自己的公钥。(gpg --armor --output public-key.asc --export aplyc1a@local.me)</span><br><span class="line">3.前两部分内容的签名。[可选](gpg --sign --armor data12.txt)</span><br></pre></td></tr></table></figure>

<p>下面是具体的3部分消息组合起来的内容：</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_115922.png" alt="2021-06-19_115922"></p>
<p>使用对方公钥加密后的内容如下：</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_120021.png" alt="2021-06-19_120021"></p>
<p>step3：对方收到来信后，用自己的私钥可以解密出密件内容。从而获得了我们的公钥。收件方也可以用这个公钥尝试对签名进行验签，验证我们这个密钥对的有效性。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_120624.png" alt="2021-06-19_120624"></p>
<p>用命令来操作就是：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg --decrypt --output plain_msg.txt  received_msg.txt</span><br><span class="line">gpg --verify plain_msg.sig.txt plain_msg.data.txt</span><br></pre></td></tr></table></figure>



<p><strong>step4</strong>：在完成上面3步后，双方就可以使用对方的公钥加密内容进行通信了。在密件中还可以带上签名文件，帮助对方判断内容来源的真实性。</p>
<p>上面提到的都是对文本的加密，对文件的加解密则更简单。下面是具体命令，使用命令行解密时还会自动验签。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 发信者对文件的加密</span></span><br><span class="line">gpg --local-user [发信者ID] --recipient [接收者ID] --armor --sign --encrypt demo.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 收信人对文件的解密，解密时会自动验证签名</span></span><br><span class="line">gpg --decrypt --output data.txt msg.txt.asc</span><br></pre></td></tr></table></figure>


<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_123535.png" alt="2021-06-19_123535"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7KeePassXC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="aplyc1a">
      <meta itemprop="description" content="Always good to see">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aplyc1a's blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7KeePassXC/" class="post-title-link" itemprop="url">密码管理工具KeePassXC</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-22 11:50:10" itemprop="dateCreated datePublished" datetime="2021-06-22T11:50:10-08:00">2021-06-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-21 23:08:58" itemprop="dateModified" datetime="2021-06-21T23:08:58-08:00">2021-06-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="KeePassXC"><a href="#KeePassXC" class="headerlink" title="KeePassXC"></a>KeePassXC</h1><p>KeePassXC是这方面做的比较好的开源密钥管理软件，它是KeePassX的升级版(KeePassX不再维护了)，这个工具稳定，跨平台，久经考验，特别适合对敏感密钥的存储。</p>
<p>工具实现了对密钥条目的分类管理，支持生成高强度的密钥，支持内部导入各种类型的敏感文件附件（如公私钥、证书等），还记录操作历史方便密钥修改后撤回，功能非常强大。</p>
<p><strong>下载地址</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">官方地址</span></span><br><span class="line">https://keepassxc.org/download/</span><br><span class="line"><span class="meta">#</span><span class="bash">Linux</span></span><br><span class="line">apt-get install keepassxc</span><br><span class="line"><span class="meta">#</span><span class="bash">windows</span></span><br><span class="line">https://github.com/keepassxreboot/keepassxc/releases/download/2.6.6/KeePassXC-2.6.6-Win64-Portable.zip</span><br></pre></td></tr></table></figure>

<p><strong>使用</strong></p>
<p>KeepassXC较它的前作KeePassX加密方面的特性改动了不少，它支持对密钥库更高强度的加密，加密算法及分组加密位数也开放给用户进行选择。</p>
<p>对于对密码学不够了解的人，最直观判断加密强度强不强看的是解密花费的时间，解密时间越长说明消耗的资源越多，运算量越大。因此工具直观的通过解密耗时数来让用户感知到密钥库的加密强度到底如何。对于懂行的人，KeePassXC用一种更专业的方式让用户选择加密算法的类型以及密钥派生及转化的参数。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_104053.png" alt="2021-06-19_104053"></p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_104244.png" alt="2021-06-19_104244"></p>
<p>KeePass还支持对密钥库设置多种类型的访问密钥，只有同时满足才能解密，形成了双因素验证，增强了安全性。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_104518.png" alt="2021-06-19_104518"></p>
<p>内部以条目树的形式实现对密码的管理，对于每一个条目，在保留前作支持生成随机的高强度的密码外，还支持生成适用于虚拟货币领域常用到的随机口令。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_112058.png" alt="2021-06-19_112058"></p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-19_111822.png" alt="2021-06-19_111822"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8C%BF%E5%90%8D%E5%AE%89%E5%85%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="aplyc1a">
      <meta itemprop="description" content="Always good to see">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aplyc1a's blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8C%BF%E5%90%8D%E5%AE%89%E5%85%A8/" class="post-title-link" itemprop="url">浏览器匿名安全</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-22 11:50:10" itemprop="dateCreated datePublished" datetime="2021-06-22T11:50:10-08:00">2021-06-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-21 23:08:48" itemprop="dateModified" datetime="2021-06-21T23:08:48-08:00">2021-06-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="浏览器安全"><a href="#浏览器安全" class="headerlink" title="浏览器安全"></a>浏览器安全</h3><p>打开浏览器浏览网页的过程中实际上会存在很多的安全风险。这一节主要记录反审查场景下的浏览器安全。</p>
<h4 id="1-前端动态脚本"><a href="#1-前端动态脚本" class="headerlink" title="1 前端动态脚本"></a>1 前端动态脚本</h4><p>从web前端技术栈的角度来看，网站拥有者能通过JS等动态脚本在用户浏览器侧实现很多功能（如：客户端情报分析、控制浏览器、窃取cookie、0day利用等）。下面给出的这个网站能帮助我们了解浏览器究竟能泄露什么信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://panopticlick.eff.orghttps://coveryourtracks.eff.org/kcarter?aat=1https://wzyboy.im/post/1130.html</span><br></pre></td></tr></table></figure>

<h5 id="1-1-NoScript"><a href="#1-1-NoScript" class="headerlink" title="1.1 NoScript"></a>1.1 NoScript</h5><p>Firefox有一个可以称之为神器的插件，名叫NoScript。NoScript通过对网页资源的加载进行控制实现对浏览器客户端的信息保护，确保浏览器在受信任的站点运行动态内容。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-20_002402.png" alt="2021-06-20_002402"></p>
<p>首次使用这个插件时可能比较难受，需要对访问的各种网站进行加载策略配置，等待对常见资源的策略清单收集的差不多的时候，使用将会变得比较容易。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-20_122610.png" alt="2021-06-20_122610"></p>
<p>默认情况下，每当访问一个从未打开的网页都需要对网站资源进行配置，Noscript支持5种预置的访问策略控制，每种策略的资源加载种类也可以具体在Noscript的设置选项中进行配置。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-20_120616.png" alt="2021-06-20_120616"></p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-20_110322.png" alt="2021-06-20_110322"></p>
<p>NoScript还会贴心的提示当前页面屏蔽了多少动态对象的加载。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-20_123216.png" alt="2021-06-20_123216"></p>
<h5 id="1-2-uBlock-origin"><a href="#1-2-uBlock-origin" class="headerlink" title="1.2 uBlock origin"></a>1.2 uBlock origin</h5><p>uBlock是另一款FireFox上热门的隐私保护工具，支持对多种浏览器可能涉及的隐私问题的选项设置。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-21_153748.png" alt="2021-06-21_153748"></p>
<p>工具的复杂度较NoScript要高一些，说实话本人并没怎么使用过。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-21_154136.png" alt="2021-06-21_154136"></p>
<h4 id="2-流媒体泄露"><a href="#2-流媒体泄露" class="headerlink" title="2 流媒体泄露"></a>2 流媒体泄露</h4><p>实际上，对任何页面上可能会产生的udp报文而言，都可能在代理场景下产生泄漏问题。虽然socks5标准支持udp，但并非每一个socks5工具都支持代理udp，这就导致本地机器可能直接向目标设备发送udp报文。如果我们本身的tcp流量是经过代理的，这时udp流量便泄露了我们的真实IP。</p>
<p>比如不少流媒体协议，流媒体协议往往应用于视频、音频等需要大数据量的场景，为了传输速率，普遍基于面向非连接的UDP协议。历史上关于流媒体协议族泄露用户真实IP的报道与文章已经层出不穷了。比如，WebRTC是用于实时语音对话或视频对话的流媒体类的API，它默认使用UDP方式进行传输。</p>
<p><a target="_blank" rel="noopener" href="https://webrtc.org.cn/is-webrtc-safe/">https://webrtc.org.cn/is-webrtc-safe/</a></p>
<h4 id="3-DNS请求泄露"><a href="#3-DNS请求泄露" class="headerlink" title="3 DNS请求泄露"></a>3 DNS请求泄露</h4><p>当我们没配置DNSoverHTTPS或DNSoverSocks5时就会产生这种问题。正常来说我们访问一个网页，要先向DNS服务器发一个域名解析请求获得网站真实地址，之后再向真实设备发请求。如果目标域名是运营商的黑名单，那通过分析短时间内的发包请求可以关联出代理服务器的地址，如果进一步反向溯源的话可能会定位到我们，当然只是可能，具体能不能定位到取决于从公网逐渐向小网逐层深入时是不是固定IP，有没有数据包记录等等。</p>
<p>下图是Firefox的代理设置页面，如果开启了DNS over Socks5就能绕过GFW对DNS流量的劫持，将实际请求放在远端发送。反之就会引发DNS泄露问题，产生一定的问题。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-21_152435.png" alt="2021-06-21_152435"></p>
<h4 id="4-证书安全"><a href="#4-证书安全" class="headerlink" title="4 证书安全"></a>4 证书安全</h4><p>浏览器的证书安全常常被人忽略。简单来说，如果浏览器被导入了不可信证书，将无法感知到https协商过程出现证书调包问题。而通过证书调包，中间人可以实现对数据的篡改与监听，实际上Web安全中非常出名的Burpsuite工具就使用了这种原理，企业网中实现对员工的数据监控也是基于这一原理。</p>
<p>想要完全明白为什么会出现中间人问题，需要搞明白https网站的加密协商原理。HTTPS本质是HTTP套了一层加密，这套TLS/SSL加密最核心是实际上通过对称加密实现的。然而如何让浏览器客户端与服务器之间在公开网络中决定<strong>使用什么样的对称加密算法</strong>及<strong>对称密钥的内容</strong>是个比较棘手的问题。为了确保这些信息不为其他人所知，这里引入了非对称加密，非对称加密体系的核心时公钥与私钥，私钥用于签名与解密、公钥用于加密与验签。具体解决方案如下：浏览器客户端与服务器在商定对称加密的具体方式时由服务器告知浏览器客户端公钥，这个公钥是依附在一张证书中的，客户端使用这个公钥来加密指定的算法及密钥，服务器使用私钥解出这些内容，协商便基本完成。</p>
<p>基本协商过程就是这样，但是中间有点问题。网站服务器将公钥回复给浏览器客户端时，客户端需要想办法确认这个公钥到底是不是服务器的公钥，而对公钥身份的认证就要用到证书，这也是为什么公钥要依附在证书里发给浏览器客户端的原因。这时，对公钥的认证就转化为了对证书的认证。证书验证通常是个信任链传导问题，通俗来说，要检查一个证书是否可信，需要按照证书内提供的信息去询问给它签发证书的机构这本证书是否可信。证书就是这么一个东西，提供对公钥的信任背书。现代浏览器客户端内往往内置了大量的CA颁发机构，常见的各种https网站中的证书向上回溯时都可以回溯到这些CA颁发机构上，因此访问这些网站时不会跳出感叹号告诉你有安全风险。反之，一旦https协商过程中用到的证书的颁发机构不在范围内，就会跳出告警页面询问你是否添加例外。BurpSuite和大型企业为了实现对https流量的控制，会让浏览器导入一份已自己作为证书颁发机构的CA证书。当用户向web网站发起https请求时，它们将网站返回的证书替换成自己的证书，客户端使用被替换的证书后实际将与中间人进行协商，而后续中间人再与网站进行协商，进而完美的插入双方的通信过程而双方无法感知。</p>
<p>因此可以看出如果浏览器预制或被导入了攻击者的证书颁发机构CA证书，将会对隐私安全造成极大的安全风险。当然，不可否认的是想要切实的实施这种攻击，攻击复杂度是比较高的，攻击者需要想尽办法先搞定我们的浏览器，之后使用ARP欺骗在局域网或在流量路由转发中实施流量拦截才行。</p>
<h5 id="4-1-Firefox检查证书"><a href="#4-1-Firefox检查证书" class="headerlink" title="4.1 Firefox检查证书"></a>4.1 Firefox检查证书</h5><p>方法一：在URL框中查看当前网页的证书信息，如果不是浏览器原生的证书，浏览器会给出相应的提示。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_195547.png" alt="2021-06-18_195547"></p>
<p>方法二：“打开应用程序菜单”=&gt;“隐私与安全”=&gt;“证书”=&gt;“查看证书”=&gt;“证书颁发机构”</p>
<h5 id="4-2-Chrome检查证书"><a href="#4-2-Chrome检查证书" class="headerlink" title="4.2 Chrome检查证书"></a>4.2 Chrome检查证书</h5><p>方法一：查看地址栏中的证书信息。</p>
<p><img src="/.com//Users\HASEE\AppData\Roaming\Typora\typora-user-images\image-20210618200241475.png" alt="image-20210618200241475"></p>
<p>方法二：”设置”=&gt;”隐私设置和安全性”=&gt;”安全”=&gt;”管理证书”=&gt;”受信任的根证书颁发机构”</p>
<h4 id="5-搜索引擎安全"><a href="#5-搜索引擎安全" class="headerlink" title="5 搜索引擎安全"></a>5 搜索引擎安全</h4><p>搜索引擎通过获取搜索记录进行分析已经不是个秘密了，商业公司是要赚钱的，对搜索记录筛查、提取、分析进而用于广告投放，是这些搜索公司业务中比较重要的一部分。当这项技术通过账号与政府、运营商联合起来使用后就能用于精准定位。</p>
<p>下面给出一些比较注重用户隐私的搜索引擎，以及使用不安全搜索引擎时的安全设置。</p>
<h5 id="5-1-DuckDuckGo"><a href="#5-1-DuckDuckGo" class="headerlink" title="5.1 DuckDuckGo"></a>5.1 DuckDuckGo</h5><p>DuckDuckGo是一款互联网搜索引擎，它注重用户隐私避免个性化检索所致的数据收集问题。它与其它搜索引擎不同的地方在于其不会分析自己的用户、对所有使用同一组关键词的用户显示同样的结果。</p>
<p><strong>搜索地址：</strong><a target="_blank" rel="noopener" href="https://duckduckgo.com/">https://duckduckgo.com/</a></p>
<h5 id="5-2-searx"><a href="#5-2-searx" class="headerlink" title="5.2 searx"></a>5.2 searx</h5><p>DuckDuckGo是一款基于<code>Python</code>的完全开源免费搜索引擎平台，不会存储你的任何搜索信息它注重用户隐私避免个性化检索所致的数据收集问题。用户甚至可以在自己本地搭建。</p>
<p><strong>安装方式：</strong><a target="_blank" rel="noopener" href="https://searx.github.io/searx/admin/installation.html">https://searx.github.io/searx/admin/installation.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/%E7%A3%81%E7%9B%98%E5%8A%A0%E5%AF%86%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="aplyc1a">
      <meta itemprop="description" content="Always good to see">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aplyc1a's blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/%E7%A3%81%E7%9B%98%E5%8A%A0%E5%AF%86%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">磁盘加密工具</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-22 11:50:10" itemprop="dateCreated datePublished" datetime="2021-06-22T11:50:10-08:00">2021-06-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-21 23:08:34" itemprop="dateModified" datetime="2021-06-21T23:08:34-08:00">2021-06-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="磁盘加密"><a href="#磁盘加密" class="headerlink" title="磁盘加密"></a>磁盘加密</h4><h5 id="1-BitLocker-windows"><a href="#1-BitLocker-windows" class="headerlink" title="1 BitLocker-windows"></a>1 BitLocker-windows</h5><p>BitLocker是微软专为windows专业版用户设计的驱动器加密工具，只有windows专业版有这个功能。微软对外宣称开启对驱动器的BitLocker能保证磁盘被取出后仍然无法获得驱动器内的数据。</p>
<p>但是，从实际效果来看，近些年关于BitLocker的漏洞与破解事件还是比较多，譬如BitLocker的加密强度问题，BitLocker在固态硬盘上的<a target="_blank" rel="noopener" href="https://www.ru.nl/publish/pages/909275/draft-paper_1.pdf">加密机制问题</a>、CVE-2020-1398（锁屏绕过漏洞）。同时BitLocker支持加密的磁盘类型是有限制的，存在对部分型号U盘、SD卡无法加密的问题。</p>
<p>下面可以看一下，BitLocker是怎么玩的，顺便感受以下其中的特点。</p>
<ol>
<li>首先，对支持BitLocker加密的驱动器而言，右键就能看到<strong>启用BitLocker</strong>选项。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_142023.png" alt="2021-06-18_142023"></p>
<ol start="2">
<li>BitLocker支持两种类型的驱动器解锁方式。这里我们选择常规的<strong>使用密码解锁驱动器</strong>。BitLocker使用AES对称加密算法对驱动器进行加密，默认AES-128。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_110959.png" alt="2021-06-18_110959"></p>
<p>在组策略中可以将强度改的更高一点，但是会造成加密磁盘时时间较长慢及后期跨磁盘间数据移动时效率低。</p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_115400.png" alt="2021-06-18_115400"></p>
<ol start="3">
<li>BitLocker支持导出恢复密钥，理论上不应将备份密钥托管到微软账户上及备份到本地其他磁盘，这些都会造成潜在的安全问题。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_111015.png" alt="2021-06-18_111015"></p>
<ol start="4">
<li>在加密磁盘时可以选择两种加密方案，一种是加密磁盘内已用空间，一种是对磁盘的整体加密。同时还有两种加密模式，可以看出BitLocker进行过大改，存在上下兼容问题。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_111923.png" alt="2021-06-18_111923"></p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_111945.png" alt="2021-06-18_111945"></p>
<ol start="5">
<li>完成对以上设置后等待对磁盘加密完成即可，每次重新登录系统都后想要访问磁盘都要输入密码。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_112013.png" alt="2021-06-18_112013"></p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_112303.png" alt="2021-06-18_112303"></p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_112341.png" alt="2021-06-18_112341"></p>
<h5 id="2-veracrypt-windows"><a href="#2-veracrypt-windows" class="headerlink" title="2 veracrypt-windows"></a>2 veracrypt-windows</h5><p>下载地址：<a target="_blank" rel="noopener" href="https://sourceforge.net/projects/veracrypt/">https://sourceforge.net/projects/veracrypt/</a></p>
<p>教程地址：<a target="_blank" rel="noopener" href="https://tlanyan.me/veracrypt-tutorial/">https://tlanyan.me/veracrypt-tutorial/</a></p>
<h5 id="3-LUKS-Linux"><a href="#3-LUKS-Linux" class="headerlink" title="3 LUKS-Linux"></a>3 LUKS-Linux</h5><p>LUKS是Linux下的一种磁盘加密标准，操作容易，格起来非常慢，需要耐心等待。下面例子演示的是GUI界面下对U盘进行LUKS加密，虽然要求U盘要将U盘的文件系统类型格为ext4，但实际上LUKS加密并不限制分区类型，使用命令行模式对分区进行LUKS加密时会有更多的选择。</p>
<ol>
<li> 格式化驱动器时选择ext4+LUKS，选上擦除能保证格式化前将磁盘上全部擦一遍0。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_150311.png" alt="2021-06-18_150311"></p>
<ol start="2">
<li>设置后期的LUKS解锁密码，之后一路确定，等待加密完成即可。这个过程会非常漫长。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_150436.png" alt="2021-06-18_150436"></p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_150449.png" alt="2021-06-18_150449"></p>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_150505.png" alt="2021-06-18_150505"></p>
<ol start="3">
<li>加密完成后，每次重启挂载该驱动器时都会要求输入密码。另外经过LUKS加密后的硬盘在windows上可就打不开了。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/aplyc1a/blogs_picture/master/2021-06-18_153141.png" alt="2021-06-18_153141"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/%E9%97%A8%E7%BD%97%E5%B8%81%E6%8C%96%E7%9F%BF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="aplyc1a">
      <meta itemprop="description" content="Always good to see">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aplyc1a's blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/%E9%97%A8%E7%BD%97%E5%B8%81%E6%8C%96%E7%9F%BF/" class="post-title-link" itemprop="url">门罗币挖矿</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-22 10:16:34" itemprop="dateCreated datePublished" datetime="2021-06-22T10:16:34-08:00">2021-06-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-21 19:20:11" itemprop="dateModified" datetime="2021-06-21T19:20:11-08:00">2021-06-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="门罗币挖矿研究"><a href="#门罗币挖矿研究" class="headerlink" title="门罗币挖矿研究"></a>门罗币挖矿研究</h1><p>[TOC]</p>
<h2 id="1-钱包"><a href="#1-钱包" class="headerlink" title="1 钱包"></a>1 钱包</h2><p>官方的在线钱包申请地址： <a target="_blank" rel="noopener" href="https://wallet.mymonero.com/">https://wallet.mymonero.com/</a></p>
<p>官方的线下钱包客户端：<a target="_blank" rel="noopener" href="https://www.getmonero.org/downloads/">https://www.getmonero.org/downloads/</a></p>
<p>在线查询门罗币的钱包地址状态：<a target="_blank" rel="noopener" href="https://www.supportxmr.com/">https://www.supportxmr.com/</a></p>
<h2 id="2-矿池"><a href="#2-矿池" class="headerlink" title="2 矿池"></a>2 矿池</h2><p>门罗的各种矿池：<a target="_blank" rel="noopener" href="https://miningpoolstats.stream/monero">https://miningpoolstats.stream/monero</a></p>
<p>找矿池的好处是无需同步区块数据，挖矿相对容易，但是得给矿主交税。并且，想要提现到余额需要挖够一定的数值门槛。</p>
<p>鱼池（xmr.f2pool.com:13531）和猫池（mine.c3pool.com:13333）是两个比较出名的矿池。</p>
<h2 id="3-部署"><a href="#3-部署" class="headerlink" title="3 部署"></a>3 部署</h2><h3 id="3-1-手工编译—xmr-stak"><a href="#3-1-手工编译—xmr-stak" class="headerlink" title="3.1 手工编译—xmr-stak"></a>3.1 手工编译—xmr-stak</h3><p>xmr-stak本身提供了已经编译好的二进制程序，但是其中含有抽税，因此要手动编译更改之。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/fireice-uk/xmr-stak</span><br><span class="line">nano xmrstak/donate-level.hpp #改流水抽成为0</span><br><span class="line">apt-get intall cmake hwloc openssl libjsonrpccpp-server0 libmicrohttpd12</span><br><span class="line"><span class="meta">#</span><span class="bash">cmake . -DCUDA_ENABLE=OFF -DOpenCL_ENABLE=OFF -DMICROHTTPD_ENABLE=OFF -DOpenSSL_ENABLE=OFF -DHWLOC_ENABLE=OFF</span></span><br><span class="line">cmake . -DCUDA_ENABLE=OFF -DOpenCL_ENABLE=OFF </span><br><span class="line">make install &amp;&amp; cd bin</span><br><span class="line">./xmr-stak  首次使用会配置各参数</span><br></pre></td></tr></table></figure>

<p>若出现“Error: MEMORY ALLOC FAILED: mmap failed”：</p>
<p>运行命令：sysctl -w vm.nr_hugepages=12</p>
<h3 id="3-2-手工编译—xmr"><a href="#3-2-手工编译—xmr" class="headerlink" title="3.2 手工编译—xmr"></a>3.2 手工编译—xmr</h3><p>xmr本身提供了已经编译好的二进制程序，但是其中含有抽税，因此要手动编译更改之。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/xmrig/xmrig.git</span><br><span class="line">apt-get install libssl-dev libhwloc-dev</span><br><span class="line">sed -i &#x27;s/kDefaultDonateLevel = 1/kDefaultDonateLevel = 0/g&#x27; xmrig/src/donate.h</span><br><span class="line">sed -i &#x27;s/kMinimumDonateLevel = 1/kMinimumDonateLevel = 0/g&#x27; xmrig/src/donate.h</span><br><span class="line">mkdir -p xmrig/build &amp;&amp; cd xmrig/build</span><br><span class="line">cmake ..; make</span><br></pre></td></tr></table></figure>

<h3 id="3-3-运行"><a href="#3-3-运行" class="headerlink" title="3.3 运行"></a>3.3 运行</h3><p>以上两软件运行时都会依赖config.json或运行时配置命令行参数。</p>
<p>编辑挖矿软件的config.json，修改其中的如下选项：</p>
<p>url:矿池地址</p>
<p>user:自己钱包地址</p>
<p>pass:随意</p>
<h3 id="3-4-无文件型挖矿工具"><a href="#3-4-无文件型挖矿工具" class="headerlink" title="3.4 无文件型挖矿工具"></a>3.4 无文件型挖矿工具</h3><p>一些矿池还提供了无文件挖矿脚本脚本，如下：</p>
<p><strong>powershell 无文件挖矿</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell <span class="literal">-Command</span> <span class="string">&quot;<span class="variable">$wc</span> = New-Object System.Net.WebClient; <span class="variable">$tempfile</span> = [System.IO.Path]::GetTempFileName(); <span class="variable">$tempfile</span> += &#x27;.bat&#x27;; <span class="variable">$wc</span>.DownloadFile(&#x27;http://download.c3pool.com/xmrig_setup/raw/master/setup_c3pool_miner.bat&#x27;, <span class="variable">$tempfile</span>); &amp; <span class="variable">$tempfile</span> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA; Remove-Item -Force <span class="variable">$tempfile</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>linux 无文件挖矿</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s -L http://download.c3pool.com/xmrig_setup/raw/master/setup_c3pool_miner.sh | LC_ALL=en_US.UTF-8 bash -s AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</span><br></pre></td></tr></table></figure>



<h2 id="4-收益"><a href="#4-收益" class="headerlink" title="4 收益"></a>4 收益</h2><h3 id="4-1-矿池收益查询："><a href="#4-1-矿池收益查询：" class="headerlink" title="4.1 矿池收益查询："></a>4.1 矿池收益查询：</h3><p><a target="_blank" rel="noopener" href="https://c3pool.com/cn/">https://c3pool.com/cn/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.f2pool.com/xmr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">https://www.f2pool.com/xmr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</a></p>
<h3 id="4-2-各种币的交易价查询："><a href="#4-2-各种币的交易价查询：" class="headerlink" title="4.2 各种币的交易价查询："></a>4.2 各种币的交易价查询：</h3><p><a target="_blank" rel="noopener" href="https://whattomine.com/">https://whattomine.com/</a>           顶部给出了各币的当前汇率</p>
<p><a target="_blank" rel="noopener" href="https://miningpoolstats.stream/">https://miningpoolstats.stream/</a>   price列给出了当前各币汇率</p>
<h3 id="4-3-门罗币收益计算器"><a href="#4-3-门罗币收益计算器" class="headerlink" title="4.3 门罗币收益计算器"></a>4.3 门罗币收益计算器</h3><p><a target="_blank" rel="noopener" href="https://www.babaofan.com/miner/xmr.html">https://www.babaofan.com/miner/xmr.html</a></p>
<h3 id="4-4-提现"><a href="#4-4-提现" class="headerlink" title="4.4 提现"></a>4.4 提现</h3><p>等你挖到了一定量的 xmr 之后，矿池会自动给你转账到你对应的门罗币钱包地址里面。这个时候你就可以找一个交易所进行提现了，比如：币安网，或者 gate.io 都可以。等你的挖到的xmr 卖出去之后你就可以收到人民币了。也就是提现了。</p>
<h2 id="5-其他"><a href="#5-其他" class="headerlink" title="5 其他"></a>5 其他</h2><h3 id="5-1-黑吃黑"><a href="#5-1-黑吃黑" class="headerlink" title="5.1 黑吃黑"></a>5.1 黑吃黑</h3><p>网上的样本：1296062aacb4a313ee0af032d23d72eb  config.json</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#把别人的换成自己的：</span></span><br><span class="line"><span class="comment">#sed -i &quot;s/old/new/g&quot; config.json</span></span><br><span class="line">sed <span class="literal">-i</span> <span class="string">&quot;s/4AzQYXMowpLSbZsm6ngvg1DhTYjsmp8qDeD7rm6rUY3DK9Hza8DpBTCSjZ2rgrTM3RdqnpUZRP8nqWtf923P7urB4QgQfp7/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/g&quot;</span> config.json</span><br><span class="line">sed <span class="literal">-i</span> <span class="string">&quot;s/pool.xmr.pt:9000/xmr.f2pool.com:13531/g&quot;</span> config.json</span><br></pre></td></tr></table></figure>
<h3 id="5-2-xmr定制研究"><a href="#5-2-xmr定制研究" class="headerlink" title="5.2 xmr定制研究"></a>5.2 xmr定制研究</h3><p>开源的xmr挖矿程序有两种运行方式，一种是裸运行（会检索并加载配置文件config.json），一种是指定参数运行。[改了一下代码]: (<a target="_blank" rel="noopener" href="https://github.com/aplyc1a/xmrig)%EF%BC%8C%E8%AE%A9%E5%AE%83%E7%9B%B4%E6%8E%A5%E7%A1%AC%E7%BC%96%E7%A0%81%E8%BF%9B%E5%8E%BB%E5%A5%BD%E4%BA%86%E3%80%82">https://github.com/aplyc1a/xmrig)，让它直接硬编码进去好了。</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">find ./ -type f -exec sed -i &quot;s/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/自己的钱包地址/g&quot; &#123;&#125; \;</span><br><span class="line">mkdir -p xmrig/build &amp;&amp; cd xmrig/build</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">常规编译</span></span><br><span class="line">cmake ..; make</span><br><span class="line"><span class="meta">#</span><span class="bash">带debug的编译</span></span><br><span class="line">cmake .. -DWITH_DEBUG_LOG=true -DWITH_INTERLEAVE_DEBUG_LOG=true -DHWLOC_DEBUG=true -DCMAKE_BUILD_TYPE=Debug ; make</span><br></pre></td></tr></table></figure>
<h3 id="5-3-网上资料"><a href="#5-3-网上资料" class="headerlink" title="5.3 网上资料"></a>5.3 网上资料</h3><p><a target="_blank" rel="noopener" href="https://blog.f2pool.com/zh/mining-tutorial/xmr">挖矿教程</a></p>
<p><a target="_blank" rel="noopener" href="https://getmonero.org/">门罗币官网</a></p>
<p><a target="_blank" rel="noopener" href="https://xmrchain.net/">区块浏览器</a></p>
<p><a target="_blank" rel="noopener" href="https://moneroblocks.info/">区块浏览器</a></p>
<p>自己搭建矿池 <a target="_blank" rel="noopener" href="https://blog.csdn.net/wab719591157/article/details/79256612">https://blog.csdn.net/wab719591157/article/details/79256612</a></p>
<p>关于门罗  <a target="_blank" rel="noopener" href="https://www.xmr-zh.com/tech/wallet-tech.html">https://www.xmr-zh.com/tech/wallet-tech.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/Linux%E5%8F%96%E8%AF%81%E8%BE%85%E5%8A%A9%E6%8A%80%E6%9C%AF(4)-%E5%B8%B8%E8%A7%81%E6%97%A5%E5%BF%97%E4%BD%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="aplyc1a">
      <meta itemprop="description" content="Always good to see">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aplyc1a's blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/Linux%E5%8F%96%E8%AF%81%E8%BE%85%E5%8A%A9%E6%8A%80%E6%9C%AF(4)-%E5%B8%B8%E8%A7%81%E6%97%A5%E5%BF%97%E4%BD%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">Linux取证辅助技术(4)-常见日志</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-22 10:16:19" itemprop="dateCreated datePublished" datetime="2021-06-22T10:16:19-08:00">2021-06-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-21 19:16:02" itemprop="dateModified" datetime="2021-06-21T19:16:02-08:00">2021-06-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="常见典型日志位置"><a href="#常见典型日志位置" class="headerlink" title="常见典型日志位置"></a>常见典型日志位置</h2><h3 id="1-登录日志"><a href="#1-登录日志" class="headerlink" title="1 登录日志"></a>1 登录日志</h3><table>
<thead>
<tr>
<th>路径</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>/var/log/audit/audit.log</td>
<td>审计日志</td>
</tr>
<tr>
<td>/var/log/messages</td>
<td>记录Linux操作系统常见的系统和服务错误信息</td>
</tr>
<tr>
<td>/var/log/secure</td>
<td>系统安全日志，记录大部分应用输入账户信息后的登陆情况</td>
</tr>
<tr>
<td>/var/log/lastlog</td>
<td>记录最后一次用户成功登陆的时间、登陆IP等信息。lastlog</td>
</tr>
<tr>
<td>/var/log/btmp</td>
<td>记录Linux登陆失败的用户、时间以及远程IP地址。lastb</td>
</tr>
<tr>
<td>/var/log/wtmp</td>
<td>永久记录用户登录事件。last</td>
</tr>
</tbody></table>
<p>特别地，前三种日志中的登录事件可以在使用systemd的linux下使用journalctl命令进行访问。关于ftp、telnet的登录日志也记录在该文件中。</p>
<h3 id="2-启动和内核日志"><a href="#2-启动和内核日志" class="headerlink" title="2 启动和内核日志"></a>2 启动和内核日志</h3><p>内核相关：/var/log/dmesg（或dmesg命令）、/var/log/kern.log</p>
<p>启动日志：/var/log/boot</p>
<h3 id="3-web日志"><a href="#3-web日志" class="headerlink" title="3 web日志"></a>3 web日志</h3><p>web日志的默认路径如下，如果不存在，则需要查看web配置文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">debian-nginx:		/var/log/nginx/access.log</span><br><span class="line">debian-apache:	/var/log/apache2/access.log </span><br><span class="line">centos-apache:		/var/log/httpd/access_log</span><br><span class="line">centos-nginx:		/var/log/nginx/access.log </span><br></pre></td></tr></table></figure>

<p>nginx配置文件：nginx.conf（一般是/etc/nginx/nginx.conf）</p>
<p>Debian-apache配置文件：httpd.conf（一般是/etc/httpd/conf/httpd.conf）</p>
<p>Centos-httpd配置文件：一般定位下来是在000-default.conf与default-ssl.conf中。</p>
<h3 id="4-防火墙日志"><a href="#4-防火墙日志" class="headerlink" title="4 防火墙日志"></a>4 防火墙日志</h3><p>iptables：</p>
<p>如果开启了日志开关（/etc/syslog.conf内添加 kern.warning /var/log/iptables.log），则根据开关内的配置位置进行输出。开启时默认输出在/var/log/messages。</p>
<p>firewalld：</p>
<p>从dmesg中过滤出相关的信息。</p>
<h3 id="5-其他-var-log日志"><a href="#5-其他-var-log日志" class="headerlink" title="5 其他/var/log日志"></a>5 其他/var/log日志</h3><p>其他日志：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/var/log/cron ：记录crond计划任务服务执行情况</span><br><span class="line">/var/log/maillog ：邮件系统日志</span><br><span class="line">/var/log/syslog ：记录警告信息</span><br><span class="line">/var/log/xferlog ：记录FTP会话</span><br><span class="line">/var/log/daemon.log 系统进程日志</span><br></pre></td></tr></table></figure>

<p>注意：如果有日志转储功能开启，根据/etc/logrotate.conf找到转储后的日志文件进行分析。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/Linux%E5%8F%96%E8%AF%81%E8%BE%85%E5%8A%A9%E6%8A%80%E6%9C%AF(3)-%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4%E6%81%A2%E5%A4%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="aplyc1a">
      <meta itemprop="description" content="Always good to see">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aplyc1a's blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/Linux%E5%8F%96%E8%AF%81%E8%BE%85%E5%8A%A9%E6%8A%80%E6%9C%AF(3)-%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4%E6%81%A2%E5%A4%8D/" class="post-title-link" itemprop="url">Linux取证辅助技术(3)-文件删除恢复</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-22 10:16:15" itemprop="dateCreated datePublished" datetime="2021-06-22T10:16:15-08:00">2021-06-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-21 19:15:57" itemprop="dateModified" datetime="2021-06-21T19:15:57-08:00">2021-06-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="文件删除恢复"><a href="#文件删除恢复" class="headerlink" title="文件删除恢复"></a>文件删除恢复</h2><h3 id="1-日志恢复"><a href="#1-日志恢复" class="headerlink" title="1 日志恢复"></a>1 日志恢复</h3><p>查找系统内已打开该文件进行读写的进程，通过访问文件描述符指向的数据空间从而访问已被标记删除的数据。</p>
<p>假设攻击者删除了/var/log/secure日志。可以通过lsof |grep /var/log/secure找到打开该文件进行读写的进程。一般来说，结果中会标记该日志为deleted。查看进程读写该日志文件时申请的文件描述符。通过访问/proc/$pid/fd/$num即可获得被删除的日志文件的数据。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lsof |grep /var/log/secure|grep deleted  #第2列pid,第4列fd</span><br><span class="line">cat /proc/$pid/fd/$fd &gt;&gt; /tmp/secure.resume</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-有进程的文件恢复"><a href="#2-有进程的文件恢复" class="headerlink" title="2 有进程的文件恢复"></a>2 有进程的文件恢复</h3><p>文件虽然被删除，但是由于存在进程，通过/proc/$pid/exe可以恢复已被删除的文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/$pid/exe &gt; /tmp/file.resume</span><br></pre></td></tr></table></figure>

<h3 id="3-无进程的文件恢复"><a href="#3-无进程的文件恢复" class="headerlink" title="3 无进程的文件恢复"></a>3 无进程的文件恢复</h3><p>系统上某孤立（当前没有进程占用它）的文件被删除，且删除时间较短，可以采用本节的方法有针对性的尝试恢复。</p>
<p>在开始尝试对文件的恢复前要判断文件系统类型。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -T /home|grep dev</span><br></pre></td></tr></table></figure>

<p>注意：不同文件系统下的文件误删恢复技术还不尽相同，没有银弹。数据恢复是一门专门的技术门类。这里只给出最常见的几种文件系统下的数据恢复手段。</p>
<h4 id="3-1-ext2文件系统-使用工具debugfs"><a href="#3-1-ext2文件系统-使用工具debugfs" class="headerlink" title="3.1 ext2文件系统-使用工具debugfs"></a>3.1 ext2文件系统-使用工具debugfs</h4><p>ext2是一类比较早的文件系统，Debian与RHEL的早期发行版常被安装在这类文件系统上。网上说debugfs可以对ext2文件系统下误删的文件进行恢复。</p>
<p>debugfs是系统自带的软件，使用起来比较方便。恢复步骤如下:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df $&#123;被删文件所在目录&#125;|grep dev		#获得被删文件所在的分区</span><br><span class="line"></span><br><span class="line">debugfs -w $分区    		#进入文件系统诊断模式 </span><br><span class="line"><span class="meta">&gt;</span><span class="bash">ls -d $被删位置			<span class="comment">#获得被删文件的inode</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">lsdel					<span class="comment">#获得所有被删文件的inode</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">dump &lt;inode&gt; $恢复位置	<span class="comment">#最终恢复</span></span></span><br><span class="line"></span><br><span class="line">注意：该软件实测在ext4及xfs文件系统上不能进行文件恢复。</span><br></pre></td></tr></table></figure>

<h4 id="3-2-ext3-ext4系统-使用extundelete"><a href="#3-2-ext3-ext4系统-使用extundelete" class="headerlink" title="3.2 ext3/ext4系统-使用extundelete"></a>3.2 ext3/ext4系统-使用extundelete</h4><p>extundelete可以帮助这种文件系统下误删文件的恢复，但是很遗憾该软件并未预装在系统环境内。因此使用该工具时要做一些额外的工作准备。</p>
<p>(1)    准备好一套分析环境，安装好extundelete工具。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">fix依赖</span></span><br><span class="line">Debian: sudo apt-get install e2fslibs-dev e2fslibs-dev</span><br><span class="line">CentOS: yum install e2fsprogs e2fsprogs-libs e2fsprogs-devel -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">源码编译</span></span><br><span class="line">wget https://jaist.dl.sourceforge.net/project/extundelete/extundelete/0.2.4/extundelete-0.2.4.tar.bz2</span><br><span class="line">tar -jxvf extundelete-0.2.4.tar.bz2 ; cd extundelete-0.2.4</span><br><span class="line">./configure ; make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<p>(2)    挂载目标磁盘。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dd if=/dev/sda of=/dev/sdc #备硬盘sda的内容到硬盘sdc上。后者空间一定要不小于前者</span><br><span class="line">mkdir -p /mnt/sdc</span><br><span class="line">mount /dev/sdc /mnt/sdc</span><br></pre></td></tr></table></figure>

<p>(3)    尝试进行恢复</p>
<p>参考下面两篇文章。</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/fat-girl-spring/p/14030840.html">https://www.cnblogs.com/fat-girl-spring/p/14030840.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.lucktang.com/2636.html">https://www.lucktang.com/2636.html</a></p>
<h4 id="3-3-xfs文件系统-使用xfsrestore"><a href="#3-3-xfs文件系统-使用xfsrestore" class="headerlink" title="3.3 xfs文件系统-使用xfsrestore"></a>3.3 xfs文件系统-使用xfsrestore</h4><p>xfs是当前RHEL下常用的文件系统。xfsdump与xfsrestore可以帮助这种文件系统下数据的恢复。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46202385/article/details/108383197">https://blog.csdn.net/weixin_46202385/article/details/108383197</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/Linux%E5%8F%96%E8%AF%81%E8%BE%85%E5%8A%A9%E6%8A%80%E6%9C%AF(2)-%E6%97%B6%E9%97%B4%E6%88%B3%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="aplyc1a">
      <meta itemprop="description" content="Always good to see">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aplyc1a's blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/Linux%E5%8F%96%E8%AF%81%E8%BE%85%E5%8A%A9%E6%8A%80%E6%9C%AF(2)-%E6%97%B6%E9%97%B4%E6%88%B3%E5%88%86%E6%9E%90/" class="post-title-link" itemprop="url">Linux取证辅助技术(2)-时间戳分析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-22 10:16:13" itemprop="dateCreated datePublished" datetime="2021-06-22T10:16:13-08:00">2021-06-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-06-21 19:15:50" itemprop="dateModified" datetime="2021-06-21T19:15:50-08:00">2021-06-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="时间戳关联分析"><a href="#时间戳关联分析" class="headerlink" title="时间戳关联分析"></a>时间戳关联分析</h2><p>时间戳分析用于在掌握一定攻击线索的情况下找出对应时间范围内的文件操作（文件访问、文件内容修改、文件属性修改）记录。</p>
<p>时间戳分析不是可靠的，但是有时能对前后关联事件分析起到意想不到的效果。因为攻击者在攻破系统后难免会在系统上造成一定的改动，而在后期做痕迹清理时很难将全部的操作痕迹抹去恢复到攻击前的样子。</p>
<p>时间戳的不可靠在于：</p>
<ol>
<li><p>系统的升级、软件的安装可能会改变文件的时间戳；</p>
</li>
<li><p>对重启过的系统分析临时生成的文件无意义。（/sys、/proc、/tmp）；</p>
</li>
<li><p>攻击者具备手工修改3种类型时间戳的能力。</p>
</li>
</ol>
<p>时间戳有至少3种：</p>
<ol>
<li><p>最近访问（access）。读写复制文件都会影响该时间戳。</p>
</li>
<li><p>最近更改（modify）。更改文件的内容时会影响该时间戳。</p>
</li>
<li><p>最近改动（change）。更改文件的属性（权限、属主组、硬链接）与内容都会影响该时间戳。</p>
</li>
<li><p>创建时间（crtime）。在ext4系统上文件有该时间戳，全局唯一，难篡改。</p>
</li>
</ol>
<p>使用时间戳分析参考这样的思路，给定一个攻击线索，查看线索上的时间戳（stat命令可以查看文件时间戳），分析是否存在该时间段前后发生变动的文件（使用find命令）。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">find命令支持对三种时间戳的过滤。</span><br><span class="line">find / &#123;-atime/-ctime/-mtime/-amin/-cmin/-mmin&#125; [-/+]num</span><br><span class="line">a:access   c:change   m:modify</span><br><span class="line"></span><br><span class="line">time以天为单位，min以分钟为单位，-表示以内，+表示以前。</span><br><span class="line">find 参数间默认时and逻辑，如果想用“或”使用“-or”，否使用“！”。</span><br><span class="line"></span><br><span class="line">find的-new参数还支持通过比较找出更新的文件。参考Y的时间找出满足条件的X文件。（Y给出时间的方式有两种，一种是通过指定使用某个文件的某项时间戳，另一个是直接通过t参数指定某个时间参考系）</span><br><span class="line">find / -newer[X:acm][Y:acm] filename</span><br><span class="line">find / -newer[X:acm]t 时间戳`yyyy-MM-dd hh:mm:ss`</span><br></pre></td></tr></table></figure>

<p>例子</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">(1) 50分钟前，1天内 权限755文件的访问记录</span></span><br><span class="line">find / -atime -1 -amin +50 -perm 755</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">(2) 1天前，10天内，访问的文件</span></span><br><span class="line">find / -atime -10 -atime +1 2&gt;/dev/null</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">(3) 检查PATH对应的目录内一段时间内发生变动的文件</span></span><br><span class="line">OLD_IFS=&quot;$IFS&quot; </span><br><span class="line">IFS=&quot;:&quot; </span><br><span class="line">arr=($PATH) </span><br><span class="line">IFS=&quot;$OLD_IFS&quot; </span><br><span class="line">for s in $&#123;arr[@]&#125; </span><br><span class="line">do </span><br><span class="line">find $s -atime -10 -amin +50</span><br><span class="line">find $s -ctime -10 -cmin +50</span><br><span class="line">find $s -mtime -10 -mmin +50</span><br><span class="line">done</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">(4)web目录内文件的时间戳排序</span></span><br><span class="line">for i in `find /var/www/html/ -type f`;do a=`stat $i|sed -n 6p`; echo &quot;$a  $i&quot;; done |sort -nr</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">(5)满足modify时间戳在2020-04-27 10:04:36接下来1s内的文件。</span></span><br><span class="line">find / -newermt &#x27;2020-04-27 10:04:36&#x27; ! -newermt &#x27;2020-04-27 10:04:37&#x27; 2&gt;/dev/null</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">(6)满足change时间戳在2020-04-27 10:04:31接下来1s内的文件。</span></span><br><span class="line">find / ! -newerct &#x27;2020-12-24 15:27:32&#x27; -newerct &#x27;2020-12-24 15:27:31&#x27; 2&gt;/dev/null</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">aplyc1a</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
